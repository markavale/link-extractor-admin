{"remainingRequest":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/src/views/auth/PasswordConfirm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/src/views/auth/PasswordConfirm.vue","mtime":1615443081701},{"path":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOYXZiYXIgZnJvbSAiQC9jb21wb25lbnRzL05hdmJhciI7CmltcG9ydCB7IHZhbGlkYXRpb25NaXhpbiB9IGZyb20gInZ1ZWxpZGF0ZSI7CmltcG9ydCB7IHJlcXVpcmVkLCBtYXhMZW5ndGgsIGVtYWlsIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsKaW1wb3J0IHsgYXhpb3NCYXNlIH0gZnJvbSAiQC9hcGkvYXhpb3NDb25maWciOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJwYXNzd29yZC1jb25maXJtIiwKICBtaXhpbnM6IFt2YWxpZGF0aW9uTWl4aW5dLAoKICB2YWxpZGF0aW9uczogewogICAgcGFzc3dvcmQxOiB7IHJlcXVpcmVkLCBtYXhMZW5ndGg6IG1heExlbmd0aCgyNCkgfSwKICAgIHBhc3N3b3JkMjogeyByZXF1aXJlZCwgbWF4TGVuZ3RoOiBtYXhMZW5ndGgoOCkgfSwKICAgIGVtYWlsOiB7IHJlcXVpcmVkLCBlbWFpbCB9LAogICAgc2VsZWN0OiB7IHJlcXVpcmVkIH0sCiAgICBjaGVja2JveDogewogICAgICBjaGVja2VkKHZhbCkgewogICAgICAgIHJldHVybiB2YWw7CiAgICAgIH0sCiAgICB9LAogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIHBhc3N3b3JkMTogIiIsCiAgICBwYXNzd29yZDI6ICIiLAogICAgc25hY2tiYXI6IHRydWUsCiAgICBlcnJvcjogZmFsc2UsCiAgICB2YWxpZDogdHJ1ZSwKICAgIHZhbHVlOiB0cnVlLAogICAgZXJyb3JzOiBbXSwKICAgIGxvYWRpbmc6IGZhbHNlLAogIH0pLAogIGNvbXBvbmVudHM6IHsKICAgIE5hdmJhciwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBuYW1lRXJyb3JzKCkgewogICAgICBjb25zdCBlcnJvcnMgPSBbXTsKICAgICAgaWYgKCF0aGlzLiR2LnBhc3N3b3JkMS4kZGlydHkpIHJldHVybiBlcnJvcnM7CiAgICAgICF0aGlzLiR2LnBhc3N3b3JkMS5tYXhMZW5ndGggJiYKICAgICAgICBlcnJvcnMucHVzaCgiUGFzc3dvcmQgbXVzdCBiZSBhdCBtb3N0IDggY2hhcmFjdGVycyBsb25nIik7CiAgICAgICF0aGlzLiR2LnBhc3N3b3JkMS5yZXF1aXJlZCAmJiBlcnJvcnMucHVzaCgiUGFzc3dvcmQgaXMgcmVxdWlyZWQuIik7CiAgICAgIHJldHVybiBlcnJvcnM7CiAgICB9LAogICAgcGFzc3dvcmRFcnJvcnMoKSB7CiAgICAgIGNvbnN0IGVycm9ycyA9IFtdOwogICAgICBpZiAoIXRoaXMuJHYucGFzc3dvcmQyLiRkaXJ0eSkgcmV0dXJuIGVycm9yczsKICAgICAgaWYgKHRoaXMucGFzc3dvcmQxICE9PSB0aGlzLnBhc3N3b3JkMikgewogICAgICAgIGVycm9ycy5wdXNoKCJQYXNzd29yZCBkb24ndCBtYXRjaC4gUGxlYXNlIHRyeSBhZ2Fpbi4iKTsKICAgICAgICByZXR1cm4gZXJyb3JzOwogICAgICB9CiAgICAgICF0aGlzLiR2LnBhc3N3b3JkMi5yZXF1aXJlZCAmJgogICAgICAgIGVycm9ycy5wdXNoKCJQbGVhc2UgQ29uZmlybSB5b3VyIFBhc3N3b3JkLiIpOwogICAgICByZXR1cm4gZXJyb3JzOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyB0aGlzLmdldEFjY2Vzc1Rva2VuKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdEZvcm0oKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGNvbnN0IHVpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy51aWQ7CiAgICAgIGNvbnN0IHRva2VuID0gdGhpcy4kcm91dGUucGFyYW1zLnRva2VuOwogICAgICB0aGlzLiR2LiR0b3VjaCgpOwogICAgICBjb25zdCBkYXRhID0gewogICAgICAgIHVpZDogdWlkLAogICAgICAgIHRva2VuOiB0b2tlbiwKICAgICAgICBwYXNzd29yZDE6IHRoaXMucGFzc3dvcmQxLAogICAgICAgIHBhc3N3b3JkMjogdGhpcy5wYXNzd29yZDIsCiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBheGlvc0Jhc2UKICAgICAgICAucG9zdChgYXV0aC9wYXNzd29yZC9yZXNldC9jb25maXJtLyR7ZGF0YS51aWR9LyR7ZGF0YS50b2tlbn0vYCwgewogICAgICAgICAgbmV3X3Bhc3N3b3JkMTogZGF0YS5wYXNzd29yZDEsCiAgICAgICAgICBuZXdfcGFzc3dvcmQyOiBkYXRhLnBhc3N3b3JkMiwKICAgICAgICAgIHVpZDogZGF0YS51aWQsCiAgICAgICAgICB0b2tlbjogZGF0YS50b2tlbiwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIAogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2U7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICB0aGlzLiR0b2FzdC5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICJQYXNzd29yZCBSZXNldCIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGBBbiBlbWFpbCBoYXMgYmVlbiByZXNldCBzdWNjZXNzZnVsbHlgLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wIHJpZ2h0JywKICAgICAgICAgICAgaWNvbjogcmVxdWlyZSgnLi4vLi4vYXNzZXRzL2ljb25zL2NoZWNrLWNpcmNsZS13aGl0ZS5wbmcnKSwKICAgICAgICAgICAgY2xvc2VCdXR0b246IHRydWUsCiAgICAgICAgICAgIHRpbWVPdXQ6IDMwMDAsCiAgICAgICAgICAgIHNob3dEdXJhdGlvbjogNTAwLAogICAgICAgICAgICBoaWRlRHVyYXRpb246IDUwMCwKICAgICAgICAgICAgc2hvd01ldGhvZDogJ2ZhZGVJbicsCiAgICAgICAgICAgIGhpZGVNZXRob2Q6ICdmYWRlT3V0JywKICAgICAgICAgICAgY29sb3I6ICcjNTFBMzUxJywKICAgICAgICAgIH0pOwogICAgICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZQogICAgICAgICAgfSwgMzUwMCkKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gZmFsc2UKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAibG9naW4iIH0pOwogICAgICAgICAgfSwgNDUwMCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuZXJyb3JzID0gW107CiAgICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZTsKICAgICAgICAgIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZygicmVzcG9uc2UiKTsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmhlYWRlcnMpOwogICAgICAgICAgICBsZXQgZXJyb3JfZGF0YSA9IGVycm9yLnJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yX2RhdGEpOwogICAgICAgICAgICBmb3IgKGNvbnN0IGZpZWxkX2Vycm9yIGluIGVycm9yX2RhdGEpIHsKICAgICAgICAgICAgICB0aGlzLmVycm9ycy5wdXNoKGVycm9yX2RhdGFbZmllbGRfZXJyb3JdWzBdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5yZXF1ZXN0KSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZXF1ZXN0Iik7CiAgICAgICAgICAgIC8vIFRoZSByZXF1ZXN0IHdhcyBtYWRlIGJ1dCBubyByZXNwb25zZSB3YXMgcmVjZWl2ZWQKICAgICAgICAgICAgLy8gYGVycm9yLnJlcXVlc3RgIGlzIGFuIGluc3RhbmNlIG9mIFhNTEh0dHBSZXF1ZXN0IGluIHRoZSBicm93c2VyIGFuZCBhbiBpbnN0YW5jZSBvZgogICAgICAgICAgICAvLyBodHRwLkNsaWVudFJlcXVlc3QgaW4gbm9kZS5qcwogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXF1ZXN0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBvY2N1cmVkIik7CiAgICAgICAgICAgIC8vIFNvbWV0aGluZyBoYXBwZW5lZCBpbiBzZXR0aW5nIHVwIHRoZSByZXF1ZXN0IHRoYXQgdHJpZ2dlcmVkIGFuIEVycm9yCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciIsIGVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IuY29uZmlnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjbGVhcigpIHsKICAgICAgdGhpcy4kdi4kcmVzZXQoKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["PasswordConfirm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PasswordConfirm.vue","sourceRoot":"src/views/auth","sourcesContent":["<template>\n  <div>\n    <Navbar />\n    <v-container>\n      <v-layout align-center justify-center>\n        <v-flex xs12 sm8 md6>\n          <v-card class=\"elevation-12\" :disabled=\"loading\" tile>\n            <v-progress-linear\n              :active=\"loading\"\n              :indeterminate=\"loading\"\n              height=\"5\"\n            ></v-progress-linear>\n            <v-toolbar dark color=\"blue\">\n              <v-toolbar-title>Password Reset Form</v-toolbar-title>\n            </v-toolbar>\n            <v-card-text>\n              <v-form v-model=\"valid\">\n                <v-alert :value=\"error\" color=\"error\" icon=\"warning\" dark>\n                  <b>Please correct the following error(s):</b>\n                  <ul>\n                    <li\n                      v-for=\"error in errors\"\n                      :key=\"error.id\"\n                      class=\"text-md-left\"\n                    >\n                      {{ error }}\n                    </li>\n                  </ul>\n                </v-alert>\n                <v-text-field\n                  v-model=\"password1\"\n                  autocomplete=\"current-password\"\n                  :value=\"password1\"\n                  prepend-icon=\"lock\"\n                  label=\"Password\"\n                  hint=\"Your password passed! Password rules are not meant to be broken!\"\n                  :append-icon=\"value ? 'mdi-eye' : 'mdi-eye-off'\"\n                  @click:append=\"() => (value = !value)\"\n                  :type=\"value ? 'password' : 'text'\"\n                  :rules=\"passwordErrors\"\n                ></v-text-field>\n\n                <v-text-field\n                  v-model=\"password2\"\n                  @keyup.enter=\"submitForm\"\n                  autocomplete=\"current-password\"\n                  :value=\"password2\"\n                  prepend-icon=\"lock\"\n                  label=\"Confirm Password\"\n                  hint=\"Your password passed! Password rules are not meant to be broken!\"\n                  :append-icon=\"value ? 'mdi-eye' : 'mdi-eye-off'\"\n                  @click:append=\"() => (value = !value)\"\n                  :type=\"value ? 'password' : 'text'\"\n                  :rules=\"nameErrors\"\n                ></v-text-field>\n                <v-card-actions>\n                  <v-btn\n                    class=\"float-right\"\n                    @click.prevent=\"submitForm\"\n                    color=\"primary\"\n                    rounded\n                    >Reset</v-btn\n                  >\n                </v-card-actions>\n              </v-form>\n            </v-card-text>\n          </v-card>\n        </v-flex>\n      </v-layout>\n    </v-container>\n    <div class=\"text-center\">\n      <v-snackbar :left=\"true\" v-model=\"snackbar\" :timeout=\"3000\">\n        Redirecting to login page.\n        <template v-slot:action=\"{ attrs }\">\n          <v-btn color=\"blue\" text v-bind=\"attrs\" @click=\"snackbar = false\">\n            Close\n          </v-btn>\n        </template>\n      </v-snackbar>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Navbar from \"@/components/Navbar\";\nimport { validationMixin } from \"vuelidate\";\nimport { required, maxLength, email } from \"vuelidate/lib/validators\";\nimport { axiosBase } from \"@/api/axiosConfig\";\n\nexport default {\n  name: \"password-confirm\",\n  mixins: [validationMixin],\n\n  validations: {\n    password1: { required, maxLength: maxLength(24) },\n    password2: { required, maxLength: maxLength(8) },\n    email: { required, email },\n    select: { required },\n    checkbox: {\n      checked(val) {\n        return val;\n      },\n    },\n  },\n  data: () => ({\n    password1: \"\",\n    password2: \"\",\n    snackbar: true,\n    error: false,\n    valid: true,\n    value: true,\n    errors: [],\n    loading: false,\n  }),\n  components: {\n    Navbar,\n  },\n  computed: {\n    nameErrors() {\n      const errors = [];\n      if (!this.$v.password1.$dirty) return errors;\n      !this.$v.password1.maxLength &&\n        errors.push(\"Password must be at most 8 characters long\");\n      !this.$v.password1.required && errors.push(\"Password is required.\");\n      return errors;\n    },\n    passwordErrors() {\n      const errors = [];\n      if (!this.$v.password2.$dirty) return errors;\n      if (this.password1 !== this.password2) {\n        errors.push(\"Password don't match. Please try again.\");\n        return errors;\n      }\n      !this.$v.password2.required &&\n        errors.push(\"Please Confirm your Password.\");\n      return errors;\n    },\n  },\n  mounted() {\n    // this.getAccessToken()\n  },\n  methods: {\n    submitForm() {\n      this.loading = true;\n      const uid = this.$route.params.uid;\n      const token = this.$route.params.token;\n      this.$v.$touch();\n      const data = {\n        uid: uid,\n        token: token,\n        password1: this.password1,\n        password2: this.password2,\n      };\n      console.log(data);\n      axiosBase\n        .post(`auth/password/reset/confirm/${data.uid}/${data.token}/`, {\n          new_password1: data.password1,\n          new_password2: data.password2,\n          uid: data.uid,\n          token: data.token,\n        })\n        .then((res) => {\n          \n          this.loading = false;\n          this.error = false;\n          console.log(res.data);\n          this.$toast.success({\n            title: \"Password Reset\",\n            message: `An email has been reset successfully`,\n            type: 'success',\n            position: 'top right',\n            icon: require('../../assets/icons/check-circle-white.png'),\n            closeButton: true,\n            timeOut: 3000,\n            showDuration: 500,\n            hideDuration: 500,\n            showMethod: 'fadeIn',\n            hideMethod: 'fadeOut',\n            color: '#51A351',\n          });\n          setTimeout(()=>{\n            this.snackbar = true\n          }, 3500)\n          setTimeout(() => {\n            this.snackbar = false\n            this.$router.push({ name: \"login\" });\n          }, 4500);\n        })\n        .catch((error) => {\n          this.loading = false;\n          this.errors = [];\n          this.error = true;\n          if (error.response) {\n            console.log(\"response\");\n            console.log(error.response.data);\n            console.log(error.response.status);\n            console.log(error.response.headers);\n            let error_data = error.response.data;\n            console.log(error_data);\n            for (const field_error in error_data) {\n              this.errors.push(error_data[field_error][0]);\n            }\n          } else if (error.request) {\n            console.log(\"request\");\n            // The request was made but no response was received\n            // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n            // http.ClientRequest in node.js\n            console.log(error.request);\n          } else {\n            console.log(\"error occured\");\n            // Something happened in setting up the request that triggered an Error\n            console.log(\"Error\", error.message);\n          }\n          console.log(error.config);\n        });\n    },\n    clear() {\n      this.$v.$reset();\n    },\n  },\n};\n</script>\n\n<style>\n</style>"]}]}