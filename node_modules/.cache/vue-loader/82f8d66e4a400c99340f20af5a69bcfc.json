{"remainingRequest":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/src/components/auth/PasswordReset.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/src/components/auth/PasswordReset.vue","mtime":1615443081697},{"path":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/markanthonyvale/dev/news-extractor-admin/frontend/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGF4aW9zQmFzZSB9IGZyb20gIkAvYXBpL2F4aW9zQ29uZmlnIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGb3JnYXRQYXNzd29yZE1vZGFsIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgZW1haWxfcmVzZXQ6ICIiLAogICAgICBtZXNzYWdlOiAiIiwKICAgICAgZXJyb3JNZXNzYWdlOiAiQW4gZXJyb3IgdWNjdXJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4iLAogICAgICBlbWFpbDogIiIsCiAgICAgIGVycm9yczogW10sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcmVxdWlyZWQ6ICh2YWx1ZSkgPT4gISF2YWx1ZSB8fCAiUmVxdWlyZWQiLAogICAgICAgIGVtYWlsOiAodmFsdWUpID0+IHsKICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSAvXigoW148PigpW1xdXFwuLDs6XHNAIl0rKFwuW148PigpW1xdXFwuLDs6XHNAIl0rKSopfCgiLisiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31dKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC87CiAgICAgICAgICByZXR1cm4gcGF0dGVybi50ZXN0KHZhbHVlKSB8fCAiSW52YWxpZCBlLW1haWwuIjsKICAgICAgICB9LAogICAgICB9LAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsb3NlRGlhbG9nKCl7CiAgICAgIHRoaXMuZGlhbG9nPWZhbHNlCiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpCiAgICB9LAogICAgc2VuZFZlcmlmaWNhdGlvbigpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgYXhpb3NCYXNlCiAgICAgICAgLy8ucG9zdCgicmVzdC1hdXRoL3Bhc3N3b3JkL3Jlc2V0LyIsIHsgZW1haWw6IHRoaXMuZW1haWwgfSkKICAgICAgICAucG9zdCgiYXV0aC9wYXNzd29yZC9yZXNldC8iLCB7IGVtYWlsOiB0aGlzLmVtYWlsIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc29sZS5sb2coImVtYWlsIHNlbnQhISIpOwogICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgdGhpcy5lbWFpbF9yZXNldCA9IHRoaXMuZW1haWwKICAgICAgICAgIHRoaXMuZW1haWwgPSAiIjsKICAgICAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2UsCiAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSByZXMuZGF0YS5kZXRhaWw7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MoewogICAgICAgICAgICB0aXRsZTogIlBhc3N3b3JkIFJlc2V0IiwKICAgICAgICAgICAgbWVzc2FnZTogYEFuIGVtYWlsIGhhcyBiZWVuIHNlbnQgdG8gJHt0aGlzLmVtYWlsX3Jlc2V0fWAsCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AgcmlnaHQnLAogICAgICAgICAgICBpY29uOiByZXF1aXJlKCcuLi8uLi9hc3NldHMvaWNvbnMvY2hlY2stY2lyY2xlLXdoaXRlLnBuZycpLAogICAgICAgICAgICBjbG9zZUJ1dHRvbjogdHJ1ZSwKICAgICAgICAgICAgdGltZU91dDogMzUwMCwKICAgICAgICAgICAgc2hvd0R1cmF0aW9uOiA1MDAsCiAgICAgICAgICAgIGhpZGVEdXJhdGlvbjogNTAwLAogICAgICAgICAgICBzaG93TWV0aG9kOiAnZmFkZUluJywKICAgICAgICAgICAgaGlkZU1ldGhvZDogJ2ZhZGVPdXQnLAogICAgICAgICAgICBjb2xvcjogJyM1MUEzNTEnLAogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLmVycm9ycyA9IFtdCiAgICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICBsZXQgZXJyb3JfZGF0YSA9IGVycm9yLnJlc3BvbnNlLmRhdGEKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yX2RhdGEpCiAgICAgICAgICBmb3IoY29uc3QgZmllbGRfZXJyb3IgaW4gZXJyb3JfZGF0YSl7CiAgICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2goZXJyb3JfZGF0YVtmaWVsZF9lcnJvcl1bMF0pCiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgY29uc29sZS5sb2coInNlbmRWZXJpZmljYXRpb24iKTsKICAgICAgCiAgICAgIAogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["PasswordReset.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"PasswordReset.vue","sourceRoot":"src/components/auth","sourcesContent":["<template>\n  <div>\n    <v-row justify=\"center\">\n      <v-dialog v-model=\"dialog\" persistent max-width=\"600px\">\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n            v-bind=\"attrs\"\n            v-on=\"on\"\n            color=\"blue darken-1\"\n            text\n            class=\"text-left\"\n            >Forgot password?</v-btn\n          >\n        </template>\n        \n        <v-card tile :disabled=\"loading\">\n          <v-progress-linear\n            :active=\"loading\"\n            :indeterminate=\"loading\"\n            height=\"5\"        \n          ></v-progress-linear>\n          <v-card-title>\n            <span class=\"headline\">Password Reset</span>\n          </v-card-title>\n          <v-card-text>\n            <v-container>\n              <v-alert :value=\"error\" color=\"error\" icon=\"warning\" dark>\n                        <b>Please correct the following error(s):</b>\n                    <ul>\n                      <li v-for=\"error in errors\" :key=\"error.id\"\n                      class=\"text-md-left\">{{ error }}</li>\n                    </ul>\n                    </v-alert>\n              <v-form ref=\"form\">\n                <v-row>\n                <v-col cols=\"12\">\n                  <v-text-field\n                    prepend-icon=\"email\"\n                    v-model=\"email\"\n                    label=\"Email*\"\n                    type=\"email\"\n                    :rules=\"[rules.required, rules.email]\"\n                    required\n                    @keypress.enter=\"sendVerification\"\n                  ></v-text-field>\n\n                </v-col>\n                <input type=\"text\" style=\"display:none;\"> <!--keyup.enter always reloads if only one input field wrapped in form -->\n              </v-row>\n              </v-form>\n            </v-container>\n            <small class=\"text-left\" left>*indicates required field</small>\n          </v-card-text>\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"blue darken-1\" text @click=\"dialog = false\">\n              Close\n            </v-btn>\n            <v-btn\n              color=\"blue darken-1\"\n              text\n              @click.prevent=\"sendVerification\"\n              :disabled=\"loading || email.length == 0\"\n              class=\"text-center\"\n            >\n             Send\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport { axiosBase } from \"@/api/axiosConfig\";\nexport default {\n  name: \"ForgatPasswordModal\",\n  data() {\n    return {\n      loading: false,\n      dialog: false,\n      error: false,\n      email_reset: \"\",\n      message: \"\",\n      errorMessage: \"An error uccured. Please try again.\",\n      email: \"\",\n      errors: [],\n      rules: {\n        required: (value) => !!value || \"Required\",\n        email: (value) => {\n          const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n          return pattern.test(value) || \"Invalid e-mail.\";\n        },\n      },\n    };\n  },\n  methods: {\n    closeDialog(){\n      this.dialog=false\n      this.$refs.form.reset()\n    },\n    sendVerification() {\n      this.loading = true;\n      axiosBase\n        //.post(\"rest-auth/password/reset/\", { email: this.email })\n        .post(\"auth/password/reset/\", { email: this.email })\n        .then((res) => {\n          console.log(\"email sent!!\");\n          console.log(res.data);\n          this.email_reset = this.email\n          this.email = \"\";\n          this.dialog = false;\n          this.error = false,\n          this.message = res.data.detail;\n          this.loading = false;\n          this.$toast.success({\n            title: \"Password Reset\",\n            message: `An email has been sent to ${this.email_reset}`,\n            type: 'success',\n            position: 'top right',\n            icon: require('../../assets/icons/check-circle-white.png'),\n            closeButton: true,\n            timeOut: 3500,\n            showDuration: 500,\n            hideDuration: 500,\n            showMethod: 'fadeIn',\n            hideMethod: 'fadeOut',\n            color: '#51A351',\n          });\n        })\n        .catch((error) => {\n          this.errors = []\n          this.error = true;\n          console.log(error);\n           let error_data = error.response.data\n          console.log(error_data)\n          for(const field_error in error_data){\n            this.errors.push(error_data[field_error][0])\n          }\n          this.loading = false;\n        });\n      console.log(\"sendVerification\");\n      \n      \n    },\n  },\n};\n</script>\n\n<style scoped>\n</style>"]}]}